# 环境搭建

## 1.VMware和ios文件准备

* VMware虚拟机和CentOS7.ios[文件](http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1804.iso)

## 2.CentOS7安装配置

* 出现“intel vt -x 处于禁用状态打不开”解决方法：开启BIOS虚拟化支持(步骤： 进入高级模式---进入高级菜单----开启intel虚拟技术)

* 安装玩CentOs后进入一站式安装界面，只需把所有带内容的感叹号全部消除，便可进行安装。软件包选择，初学者建议选择带GUI的服务器，同时把“开发工具”相关的软件包也安装上。

* 选择-系统-安装位置，进入磁盘分区界面，选择-其它存储选项-分区-我要配置分区，点左上角的“完成”，进入下面的界面，在分区方案有标准分区，btrfs，LVM，LVM简单配置，这里选择“标准分区”就可以。然后单击创建新的分区进行手动分区，分区提前规划好， /boot分区200M，一般swap分区为物理内存的1.5~2倍，当物理机内存多于16G后，swap分区给8-16G都可以。 /根分区10G，实际工作中可以创建数据分区，一般把数据和系统分开。设备类型选择默认的标准分区，文件系统类型为xfs，Centos7支持brtfs，生产环境不建议选择，btrfs文件系统目前技术尚未成熟，只是作为一种前瞻技术。
1. boot 分区：是引导分区，作用：系统启动，在boot分区存放着grub，内核文件等，一般200M就够。
2. swap交换分区：内存扩展分区，交换分区；一般最多：8G，16G，如果系统使用到了swap分区，就直接添加物理内存或排查一下服务器有没有被黑。
3. /根：所有文件的根，绝对路径的开始标志
4. sda：表示第一块磁盘

* 网络配置，默认centos7是关闭网络的，一定要开启以太网连接，将会自动获取IP地址，也可以修改为静态IP地址。

* KDUMP可以禁用，安全策略使用默认即可。

## 3.其他

* centos 6-与centos 7的区别：
1. 文件系统的区别：ext4  xfs
2. 硬盘默认调度算法不一样：cfq  deadline
3. 内核版本不一样：2.6   3.10
4. 在7中，支持动态补丁机制kpatch,这个也是作为技术预览的，和btrfs文件系统一样
5. 支持内核模块黑名单机制：modproble.blacklist=module
6. 支持嵌套虚拟化技术，对虚拟机cpu更流畅
7. 内核级支持资源调优和分配  在7中，以cgroup
8. 在6中对usb2.0.在7中,usb3.0支持
9. lvm快照。在7中。qcow2格式文件型快照的支持
10. 加强了对vmware的技术支持。自带open-vmtools替换了vm-tools
11. 启动工具，在7中用的全新服务启动管理器systemctl ,在6中,做一些服务的启停用service
12. 在7 中内核出现错误了。导出core文件最大支持3TB，6中最大支持2TB

* vmware提供三种网络工作模式，分别是：Bridged（桥接模式）、NAT（网络地址转换模式）、Host-Only（仅主机模式）。
1. 桥接模式：就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。在桥接的作用下，类似于把物理主机虚拟为一个交换机，所有桥接设置的虚拟机连接到这个交换机的一个接口上，物理主机也同样插在这个交换机当中。虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致。
2. NAT（地址转换模式）：在NAT模式下，虚拟主机需要借助虚拟NAT设备和虚拟DHCP服务器，使得虚拟机可以联网。虚拟机和物理机共有一个IP地址。虚拟机使用NAT模式时，Linux系统要配置成动态获取IP。
3. Host-Only模式：将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。相当于NAT模式去除了虚拟NAT地址转换功能。虚拟机使用Host-Only模式时，Linux系统要配置成动态获取IP。